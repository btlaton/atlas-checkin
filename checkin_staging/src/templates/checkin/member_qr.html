<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Your Atlas Gym QR</title>
    <link rel="stylesheet" href="/static/checkin/style.css" />
  </head>
  <body>
    <div class="container small">
      <h1>Your Check-In Code</h1>
      <p>Show this code at the front desk kiosk.</p>
      <div class="token-box" id="token-box">{{ token }}</div>
      <div style="margin:12px 0; text-align:center;">
        <img id="qrImg" width="220" height="220" alt="Your QR code" src="/api/qr.png?token={{ token }}" />
      </div>
      <button id="copy">Copy</button>
      <p class="muted">Tip: Add this page to your phoneâ€™s home screen or bookmarks.</p>
      <p class="muted">Note: This QR is rendered locally if a library is present, otherwise via a public image service.</p>
    </div>
    <script>
      document.getElementById('copy').addEventListener('click', async () => {
        const txt = document.getElementById('token-box').textContent.trim();
        try { await navigator.clipboard.writeText(txt); alert('Copied!'); } catch (e) { alert('Copy failed'); }
      });
      // QR is rendered server-side by /api/qr.png
    </script>
  </body>
  </html>
